{% extends 'base.html' %} {% block body %} {% with messages =
get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages
%}
<div
  class="alert alert-{{ 'danger' if category == 'error' else 'success' if category == 'success' else 'info' }} alert-dismissible fade show"
  role="alert"
>
  {{ message }}
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endfor %} {% endif %} {% endwith %}

<ul class="nav justify-content-center" style="padding-top: 1em">
  <li class="nav-item">
    <a class="btn btn-primary" href="{{ url_for('notes_create') }}">Create Note</a>
  </li>
  <li class="nav-item ms-2">
    <a class="btn btn-outline-secondary" href="{{ url_for('tags_index') }}">Manage Tags</a>
  </li>
</ul>

{% for note in notes %}
<div class="card my-3">
  <div class="card-body">
    <h4 class="card-title">{{ note.title }}</h4>
    <div class="card-text my-3">{{ note.description }}</div>
    <div class="card-footer text-muted">
      Tags: {% for t in note.tags %}
      <a
        href="{{ url_for('tags_view', tag_name=t.name) }}"
        class="badge bg-primary text-decoration-none me-1"
        >{{ t.name }}</a
      >
      {% endfor %} {% if not note.tags %}
      <span class="text-muted">No tags</span>
      {% endif %}
      <br />
      Last update: {{ note.updated_date }}
      <br />
      <a class="btn btn-warning btn-sm mt-2" href="{{ url_for('notes_update', id=note.id) }}"
        >Update</a
      >
      <a
        class="btn btn-danger btn-sm mt-2"
        href="{{ url_for('notes_delete', id=note.id) }}"
        onclick="return confirm('Are you sure you want to delete this note?')"
        >Delete</a
      >
    </div>
  </div>
</div>
{% endfor %} {% if not notes %}
<div class="alert alert-info text-center">
  <h4>No notes found</h4>
  <p>Create your first note to get started.</p>
  <a href="{{ url_for('notes_create') }}" class="btn btn-primary">Create First Note</a>
</div>
{% endif %}

<script>
  // JavaScript for delete confirmation popup
  function confirmDelete() {
    return confirm("Are you sure you want to delete this note?");
  }
</script>
{% endblock %}
