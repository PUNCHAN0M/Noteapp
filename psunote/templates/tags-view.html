{% extends 'base.html' %} {% block title %}Tag: {{ tag_name }}{% endblock %} {% block body %} {%
with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category,
message in messages %}
<div
  class="alert alert-{{ 'danger' if category == 'error' else 'success' if category == 'success' else 'info' }} alert-dismissible fade show"
  role="alert"
>
  {{ message }}
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endfor %} {% endif %} {% endwith %}

<div class="d-flex justify-content-between align-items-center" style="padding-top: 1em">
  <h3>Notes with tag: <span class="badge bg-primary">{{ tag_name }}</span></h3>
  <div>
    <a class="btn btn-primary" href="{{ url_for('index') }}">Home</a>
    <a class="btn btn-outline-secondary" href="{{ url_for('tags_index') }}">Manage Tags</a>
    {% if tag %}
    <a class="btn btn-outline-warning" href="{{ url_for('tags_update', tag_id=tag.id) }}"
      >Edit Tag</a
    >
    <a
      class="btn btn-outline-danger"
      href="{{ url_for('tags_delete', tag_id=tag.id) }}"
      onclick="return confirm('Are you sure you want to delete tag \'{{ tag_name }}\'? This will remove it from all notes.')"
      >Delete Tag</a
    >
    {% endif %}
  </div>
</div>

{% for note in notes %}
<div class="card my-3">
  <div class="card-body">
    <h4 class="card-title">{{ note.title }}</h4>
    <div class="card-text my-3">{{ note.description }}</div>
    <div class="card-footer text-muted">
      Tags: {% for t in note.tags %}
      <a
        href="{{ url_for('tags_view', tag_name=t.name) }}"
        class="badge bg-primary text-decoration-none me-1"
        >{{ t.name }}</a
      >
      {% endfor %}
      <br />
      Last update: {{ note.updated_date }}
      <br />
      <a class="btn btn-warning btn-sm mt-2" href="{{ url_for('notes_update', id=note.id) }}"
        >Update</a
      >
      <a
        class="btn btn-danger btn-sm mt-2"
        href="{{ url_for('notes_delete', id=note.id) }}"
        onclick="return confirm('Are you sure you want to delete this note?')"
        >Delete</a
      >
    </div>
  </div>
</div>
{% endfor %} {% if not notes %}
<div class="alert alert-info text-center">
  <h4>No notes found with this tag</h4>
  <p>Create a note with the tag "{{ tag_name }}" to see it here.</p>
  <a href="{{ url_for('notes_create') }}" class="btn btn-primary">Create Note</a>
</div>
{% endif %} {% endblock %}
